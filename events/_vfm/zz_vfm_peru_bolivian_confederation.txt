namespace = peru_bolivia_confederation

peru_bolivia_confederation.3 = { #Division of Peru 		
	type = country_event
	placement = ROOT
	title = peru_bolivia_confederation.3.t
	desc = peru_bolivia_confederation.3.d
	flavor =  peru_bolivia_confederation.3.f

	duration = 1

	event_image = {
		video = "gfx/event_pictures/southamerica_aristocrats.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/aristocrats"

	icon = "gfx/interface/icons/event_icons/event_default.dds"

	trigger = {
		    #triggered by JE
	}

	option = { #Dividir Perú
		name = peru_bolivia_confederation.3.a
		default_option = yes

		custom_tooltip = peru_bolivia_confederation.3.tt
		hidden_effect = {

		create_country = {
            tag = SPU
			origin = c:PEU
			state = s:STATE_AREQUIPA.region_state:PEU
		}
		s:STATE_ICA.region_state:PEU = {
			set_state_owner = c:SPU
		}
		s:STATE_TARAPACA = {
			set_owner_of_provinces = {
				country = c:SPU
				provinces = { xB3DA33 x380AE9 xC9DDC4 x8733A4 x79C7F7 x2F3768 x1040D0 xD46425 xCB9DD5 xF391A7 xA00070 x49DD3B x2FB295 }
			}
		}
        create_diplomatic_pact = {
            country = c:SPU
            type = confederative_partner
        }
		c:SPU = {
			set_relations = { country = c:BOL value = 80 }
			create_character = {
				first_name = nicolas
				last_name = fernandez_de_pierola
				historical = yes
				ig_leader = yes
				interest_group = ig_liberals #ig_intelligentsia
				ruler = yes
				birth_date = 1788.01.23
				female = no
				culture = cu:south_andean
				dna = dna_nicolas_fernandez_de_pierola
				ideology = ideology_moderate #ideology_meritocratic
				religion = rel:catholic
				traits = {
					persistent
					basic_diplomat
				}
		    }
			create_character = {
				first_name = blas
				last_name = cardena
				historical = yes
				ig_leader = no 
				interest_group = ig_armed_forces
				is_general = yes
				birth_date = 1792.2.2
				female = no 
				culture = cu:south_andean 
				dna = dna_blas_cardeñas
				ideology = ideology_moderate
				religion = rel:catholic
				traits = {
					reserved
					experienced_offensive_planner 
				}
			}
			add_journal_entry = {
				type = je_peru_bolivia
			}	
		}
		c:PEU = {
		    if={
			    limit = {
				    NOT = { exists = c:NPU }
			    }
			    change_tag = NPU
		    }
		}
        create_diplomatic_pact = {
            country = c:NPU
            type = confederative_partner
        }		
		change_relations = {
			country = c:NPU
			value = -80
		}
		}
		trigger_event = {
			id = peru_bolivia_confederation.4
			days = 6
		}

		c:NPU = {
			trigger_event = {
				id = peru_bolivia_confederation.4
				days = 5
			}
		}

		c:CHL = {
			trigger_event = {
				id = journal_flavor_chile.1
				months = 2
			}			    
		} 		    			    		
		
		ai_chance = {
			base = 100
		}
	}	

	option = {  #Peru Unido
		name = peru_bolivia_confederation.3.b
		trigger_event = {
			id = peru_bolivia_confederation.6
			months = 7
		}
	}
}

peru_bolivia_confederation.4 = { #South Peru Declaration of Independence
	type = country_event
	placement = ROOT
	title = {
		first_valid = {
			triggered_desc = {
				desc = peru_bolivia_confederation.4.t
				trigger = {
					exists = c:BOL
					c:BOL = THIS
				}
			}
			triggered_desc = {
				desc = peru_bolivia_confederation.4.t2
				trigger = {
					exists = c:SPU
					c:NPU = THIS
				}
			}
		}
	}

	desc = peru_bolivia_confederation.4.d

	flavor =  peru_bolivia_confederation.4.f

	duration = 1

	event_image = {
		video = "gfx/event_pictures/unspecific_politicians_arguing.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/aristocrats"

	icon = "gfx/interface/icons/event_icons/event_default.dds"

	trigger = {
		    #triggered by chain
	}

	immediate = {

		c:SPU = {
			save_scope_as = spu_scope
		}

		c:BOL = {
			save_scope_as = bol_scope
		}	
	}

	option = { #viva la independecia! - BOL
		default_option = yes
		name = peru_bolivia_confederation.4.a
		trigger = {
			exists = c:BOL
			c:BOL = THIS
		}
		trigger_event = {
			id = peru_bolivia_confederation.5
			months = 7
		}
		hidden_effect = {
            c:SPU = { 
				add_modifier = {
			      name = age_of_caudillos_modifier
			      months = very_long_modifier_time
			      is_decaying = yes
		        }

				activate_law = law_type:law_confederated

				bpm_setup_country = yes

				ig:ig_devout = { 
					bpm_remove_all_cit_ideologies = yes
					add_ideology = ideology_cit_immigrant_nationalist
					bpm_reorder_ideologies = yes
				}

				ig:ig_reactionaries = { 
					bpm_remove_all_mil_ideologies = yes
					add_ideology = ideology_mil_institutional_militarist
					bpm_remove_all_wel_ideologies = yes
					add_ideology = ideology_wel_religious_welfare
					bpm_remove_all_eco_ideologies = yes
					add_ideology = ideology_eco_conservative_agrarian
					remove_modifier = bpm_landowner_wary
					bpm_reorder_ideologies = yes
				}

				ig:ig_radicals = { 
					bpm_remove_all_sta_ideologies = yes
					add_ideology = ideology_sta_minimal_state
					bpm_remove_all_mil_ideologies = yes
					add_ideology = ideology_mil_antimilitarist
					bpm_reorder_ideologies = yes
				}

				ig:ig_armed_forces = {
					add_ideology = ideology_caudillismo
					bpm_ig_make_caudillismo = yes
					bpm_reorder_ideologies = yes
				}

				ig:ig_landowners = {
					add_ideology = ideology_caudillismo
					bpm_ig_make_caudillismo = yes
					bpm_reorder_ideologies = yes
				}
		
				ig:ig_liberals = {
					remove_ideology = ideology_liberal
					add_ideology = ideology_liberalismo
					add_ideology = ideology_soberania_aristocratica
					bpm_remove_all_mil_ideologies = yes
					add_ideology = ideology_mil_antimilitarist
					bpm_reorder_ideologies = yes
				}

				ig:ig_conservatives = {
					add_ruling_interest_group = yes
					remove_ideology = ideology_paternalistic
					remove_ideology = ideology_stratocratic
					add_ideology = ideology_conservadurismo
					add_ideology = ideology_soberania_aristocratica
					bpm_reorder_ideologies = yes
				}

				ig:ig_rural_folk = {
					remove_ideology = ideology_agrarian
					remove_ideology = ideology_isolationist
					remove_ideology = ideology_particularist
					add_ideology = ideology_agroexportadores
					add_ideology = ideology_pious
					add_ideology = ideology_patriarchal
					add_ideology = ideology_communalist

					bpm_remove_all_wel_ideologies = yes
					add_ideology = ideology_wel_religious_welfare
					bpm_remove_all_fem_ideologies = yes
					add_ideology = ideology_fem_patriarchal

					bpm_reorder_ideologies = yes
				}

				ig:ig_intelligentsia = {
					remove_ideology = ideology_reactionary
					add_ideology = ideology_artesanado
					pm_remove_all_eco_ideologies = yes
					add_ideology = ideology_eco_interventionist
					bpm_reorder_ideologies = yes
				}

				random_scope_state = {
					limit = {
						state_region = s:STATE_ICA
					}
					set_state_type = incorporated
				}
				random_scope_state = {
					limit = {
						state_region = s:STATE_LIMA
					}
					set_state_type = incorporated
				}
				random_scope_state = {
					limit = {
						state_region = s:STATE_TARAPACA
					}
					set_state_type = incorporated
				}
			}	
		}	
		c:SPU = {
			set_next_election_date = "1837.9.17"
			add_loyalists = {
				strata = poor
				value = 0.6
			}
			add_loyalists = {
				strata = rich
				value = 0.3
			}
			create_character = {
				first_name = pio
				last_name = tristan
				historical = yes
				ig_leader = no
				interest_group = ig_armed_forces
				ruler = yes
				birth_date = 1773.07.11
				female = no
				culture = cu:south_andean
				dna = dna_pio_tristan
				ideology = ideology_moderate
				religion = rel:catholic
				traits = {
					reserved
					tactful
					experienced_defensive_strategist
				}
			}
			create_character = {
				first_name = ramon
				last_name = herrera
				historical = yes
				ig_leader = yes
				interest_group = ig_armed_forces
				birth_date = 1799.12.7
				female = no
				culture = cu:south_andean
				dna = dna_ramon_herrera
				ideology = ideology_moderate
				religion = rel:catholic
				traits = { 
					tactful
					traditionalist_commander
					basic_diplomat
				}
			}
		}
	}	
	option = { #viva la independecia! - PEU
		default_option = yes
		name = peru_bolivia_confederation.4.b
		trigger = {
			exists = c:NPU
			c:NPU = THIS
		}	
	}
}
